<!DOCTYPE html>
<!-- Samuel Simun xsimun04@fit.vutbr.cz-->
{% load static %}
<html style="font-size: 16px;" lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>Manage team</title>
    <link rel="stylesheet" href="{% static 'projects/nicepage.css' %}" media="screen">
<link rel="stylesheet" href="{% static 'projects/Page-2.css' %}" media="screen">
    <meta name="generator" content="Nicepage 5.1.5, nicepage.com">
    <meta name="referrer" content="origin">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Page 2">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body u-xl-mode" data-lang="en"><header class="u-clearfix u-header u-header" id="sec-b4e3"><div class="u-clearfix u-sheet u-sheet-1">
        <a class="u-image u-logo u-image-1">
          <img src="{% static 'to_do_list/images/teamos_logo.png' %}" class="u-logo-image u-logo-image-1">
        </a>
        <nav class="u-menu u-menu-one-level u-offcanvas u-menu-1">
          <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
            <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
              <svg class="u-svg-link" viewBox="0 0 24 24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use></svg>
              <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</g></svg>
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#" style="padding: 10px 20px;">Page 2</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Page-1.html" style="padding: 10px 20px;">Page 1</a>
</li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="#">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="#">Page 2</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Page-1.html">Page 1</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
      </div></header>
    <section class="u-clearfix u-section-1" id="carousel_2fcb">
      <div class="u-clearfix u-sheet u-sheet-1">
          <h3 class="u-text u-text-default u-text-1">Project {{data.name}}</h3>
                  <a href="show_timeline?project_name={{data.name}}" class="u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-hover-palette-1-light-1 u-palette-1-base u-radius-50 u-btn-1"> Back</a>

        <a href="delete_project?project_name={{data.name}}" class="u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-hover-palette-1-light-1 u-palette-2-dark-1 u-radius-50 u-btn-1">Delete project</a>

          <p></p>
          <hr>
          <h3 class="u-text u-text-default u-text-2">Add deadlines</h3>
        <div class="u-form u-form-1">
          <form action="" method="post" id="form" class=" create_new u-clearfix u-form-spacing-10 u-form-vertical u-inner-form" name="form" style="padding: 10px;">
                {% csrf_token %}
              <div class="u-form-group u-form-name">
              <label for="name-3764" class="u-label">Deadline</label>
              <input type="text" placeholder="Enter deadline's name" id="name-3764" name="deadline" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" required="">
            </div>
            <div class="u-form-email u-form-group">
              <label for="email-3764" class="u-label">Date</label>
              <input type="date" placeholder="Enter a valid date" id="email-3764" name="date" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" required="">
            </div>
            <div class="u-form-group u-form-message">
              <label for="message-3764" class="u-label">Description</label>
              <textarea placeholder="Enter deadline description" rows="4" cols="50" id="message-3764" name="message" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" required=""></textarea>
            </div>
            <div class="u-align-center u-form-group u-form-submit">
              <input type="submit" value="Create new deadline" class="u-btn u-btn-submit u-button-style">
            </div>
            <input type="hidden" value="" name="recaptchaResponse">
            <input type="hidden" name="formServices" value="f24b4b66988b1e3b02ebfd15a8bf1352">
          </form>
        </div>
        <hr>
        <h3 class="u-text u-text-default u-text-2">Current deadlines</h3>
        <div class="deadlines">
          {% for date,message,name in deadlines_data %}
        <div class="record u-container-style u-group u-palette-1-base u-radius-10 u-shape-round u-group-1">
          <div class="u-container-layout u-container-layout-1"><a href="delete_deadline?project_name={{data.name}}&deadline_name={{name}}" class="link-delete"> <span class=" u-file-icon u-icon u-icon-1"><img src="{% static 'projects/images/1828665.png' %}" class="" alt=""></span> </a>
            <h3 class="u-text u-text-default u-text-3">{{name}}</h3>
            <p class="u-align-center u-text u-text-4">{{date}}</p>
            <p class="u-align-center u-text u-text-5">{{message}}</p>
          </div>
        </div>
          {% endfor %}
        </div>
      </div>
        <p></p>
    </section>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
            $("#form").submit(function(e){
                e.preventDefault();
                $.ajax({
                    type: "POST",
                    url: 'manage_deadlines?project_name={{data.name}}',
                    data :{
                        deadline: $("#name-3764").val(),
                        date: $("#email-3764").val(),
                        message: $("#message-3764").val(),
                        csrfmiddlewaretoken : $('input[name=csrfmiddlewaretoken]').val(),
                        action : "post"
                    },
                    success:function (resp){
                        document.getElementById("form").reset();
                        console.log(resp.message)
                        $(".deadlines").before("" +
                            "<div class=\"record u-container-style u-group u-palette-1-base u-radius-10 u-shape-round u-group-1\">\n" +
                            "          <div class=\"u-container-layout u-container-layout-1\"><a href=\"delete_deadline?project_name={{data.name}}&deadline_name=" + resp.deadline_name + "\" class=\"link-delete\"> <span class=\" u-file-icon u-icon u-icon-1\"><img src=\"{% static 'projects/images/1828665.png' %}\" class=\"\" alt=\"\"></span> </a>\n" +
                            "            <h3 class=\"u-text u-text-default u-text-3\">" + resp.deadline_name + "</h3>\n" +
                            "            <p class=\"u-align-center u-text u-text-4\">" + resp.deadline_date + "</p>\n" +
                            "            <p class=\"u-align-center u-text u-text-5\">" + resp.deadline_text + "</p>\n" +
                            "          </div>\n" +
                            "        </div>")
                        $(".link-delete").on("click", function(e){
                        e.preventDefault();
                        var $this = $(this);
                        if (confirm("You are going to remove one of your targets. \nAre you sure?")){
                            $.ajax({
                                url: $this.attr("href"),
                                type: "GET",
                                dataType: "json",
                                success: function(resp) {
                                    if (resp.message === 'success') {
                                        $this.parents('.record').fadeOut("slow", function () {
                                            $this.parents('.record').remove();
                                        });
                                    }
                                    else {
                                        alert(resp.message)
                                    }
                                },
                                error: function(resp) {
                                    console.log("Something went wrong");
                                    }
                                })
                            }
                        })
                    },
                    error : function(xhr,errmsg,err) {
                        window.alert("User doesn't exists");
                    }
                });
            })
        </script>
  <script>
      $(".link-delete").on("click", function(e){
                e.preventDefault();
                var $this = $(this);
                if (confirm("You are going to remove one of your targets. \nAre you sure?")){
                    $.ajax({
                        url: $this.attr("href"),
                        type: "GET",
                        dataType: "json",
                        success: function(resp) {
                            if (resp.message === 'success') {
                                $this.parents('.record').fadeOut("slow", function () {
                                    $this.parents('.record').remove();
                                });
                            }
                            else {
                                alert(resp.message)
                            }
                        },
                        error: function(resp) {
                            console.log("Something went wrong");
                        }
                    })
                }
            })

  </script>
<footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-29ff"><div class="u-clearfix u-sheet u-sheet-1">
        <p></p>
        <p class="u-small-text u-text u-text-variant u-text-1">Here you can manage your project</p>
        <p></p>
      </div></footer>
</body></html>