<!DOCTYPE html>
<!-- Daniel Zarsky xzarsk04@fit.vutbr.cz-->
<!-- zobrazeni ukolu -->
<html style="font-size: 16px;" lang="en"><head>

    <title>To do list</title>
    {% load static %}
    <link rel="stylesheet"  href="{% static 'to_do_list/nicepage.css' %}" media="screen">
    <link rel="stylesheet" href="{% static 'to_do_list/Page-1.css' %}" media="screen">
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script class="u-script" type="text/javascript" src="{% static 'to_do_list/nicepage.js' %}" defer=""></script>
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">

    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "",
		"logo": "{% static 'to_do_list/images/teamos_logo.png'%}"
}</script>
<style>
#panel {
  padding: 50px;
  text-align: left;
  background-color: #5DEACF;
  border: solid 1px #c3c3c3;
}

#panel {
  padding: 20px;
  display: none;
}
</style>

  </head>
  <body class="u-body u-xl-mode" data-lang="en"><header class="u-clearfix u-header u-header" id="sec-1255"><div class="u-clearfix u-sheet u-sheet-1">
        <a href="{% url 'home' %}"  class="u-image u-logo u-image-1">
          <img src="{% static 'to_do_list/images/teamos_logo.png'%}" class="u-logo-image u-logo-image-1">
        </a>
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
          <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
            <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
              <svg class="u-svg-link" viewBox="0 0 24 24"><use xlink:href="#menu-hamburger"></use></svg>
              <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</g></svg>
            </a>
          </div>
          <div class="u-nav-container">
             <ul class="u-nav u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="{% url 'to_do_list:tasklist' %}" style="padding: 10px 20px;">Tasks</a>
<!-- navigace -->
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="{% url 'to_do_list:home' %}" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="{% url 'to_do_list:view_teams' %}" style="padding: 10px 20px;">Teams</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="{% url 'to_do_list:view_projects' %}" style="padding: 10px 20px;">Projects</a>
</li></ul>
          </div>
          <div class="u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                  <ul class="u-nav u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="{% url 'to_do_list:tasklist' %}" style="padding: 10px 20px;">Tasks</a>

</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="{% url 'to_do_list:home' %}" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="{% url 'to_do_list:view_teams' %}" style="padding: 10px 20px;">Teams</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="{% url 'to_do_list:view_projects' %}" style="padding: 10px 20px;">Projects</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
      <!-- Show butto + add new task button -->
      <a href="{% url 'to_do_list:addTask' %}" class="u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-hover-palette-1-light-1 u-palette-1-base u-radius-50 u-btn-1">ADD NEW TASK</a>
         <a id="show_done" href="{% url 'to_do_list:show_done'%}" class="show-done u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-hover-palette-1-light-1 u-palette-1-base u-radius-50 u-btn-2">SHOW DONE</a>
      <div id="panel"><p id="done"></p><a class=" hide-done u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-hover-palette-1-light-1 u-palette-1-base u-radius-50 u-btn-1">Hide done</a></div>
      </div></header>

    <!-- Section for tasks -->
    <section class="  u-align-left u-clearfix u-valign-top-sm u-valign-top-xs u-section-1" id="carousel_dfc2">
         {% for Task in data %}
      <div class=" record u-clearfix u-sheet u-sheet-1">
        <div class="u-align-left u-container-style u-grey-10 u-group u-group-1">
          <div class="u-container-layout">
            <div class="u-container-style u-group u-palette-1-base u-radius-29 u-shape-round u-group-2">

              <div class="u-container-layout u-container-layout-2">
                <div class="u-countdown u-countdown-1" data-timer-id="6033" data-type="to-date" data-target-date="{{Task.date}}" data-for="everyone" data-direction="down">
                  <div class="u-countdown-wrapper u-spacing-5">
                    <div class="u-countdown-item u-countdown-years u-hidden u-spacing-10">
                      <div class="u-countdown-counter u-countdown-counter-1">  <div class="u-countdown-number">0</div><div class="u-countdown-number u-hidden">0</div></div>
                      <div class="u-countdown-label u-countdown-label-1"> </div>
                    </div>

                  </div>
                </div>
                  <!-- Nazev plus deadline tasku-->
                <strong><h3 class="u-t<!-- Daniel Zarsky xzarsk04@fit.vutbr.cz-->ext " id="name_of_task">{{Task.name}}</h3></strong><h5>Deadline:{{ Task.deadline}}</h5>

                 <!-- Priority -->
                Priority:<span class="u-file-icon u-icon u-icon-1">{{Task.priority}}</span>
                   <!-- Icona description-->
                  <span class="u-file-icon u-icon u-icon-2"><a class="u-image u-image-circle u-image-1 describe" value="{{Task.description}}"><img src="{% static 'to_do_list/images/bigfolder.png' %}" alt=""></a></span>
                  <span class="u-file-icon u-hidden u-icon u-icon-3"><img src="{% static 'to_do_list/images/1828970.png' %}" alt=""></span>
                </div>
                <!-- Done button -->
            </div>   <span class="u-icon u-icon-4"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 50 50" style=""><use xlink:href="#svg-312c"></use></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve" class="u-svg-content" viewBox="0 0 50 50" x="0px" y="0px" id="svg-312c" style="enable-background:new 0 0 50 50;">
              <a><circle href="/to_do_list/task_done/{{Task.name}}"  class="done-button" style="fill:#25AE88;" cx="25" cy="25" r="25"></circle></a>

               <!-- kostra  -->
              <polyline style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;" points="
	            38,15 22,33 12,25 "></polyline> </svg></span>
               <!-- profilovy obrazek -->
                <img class="u-image u-image-circle u-image-1"   src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJkZWZhdWx0LWltYWdlLXNvbGlkIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCgl4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQwMCAyNjUiIHN0eWxlPSJ3aWR0aDogNDAwcHg7IGhlaWdodDogMjY1cHg7Ij4KPGxpbmVhckdyYWRpZW50IGlkPSJYTUxJRF8yXyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIyMDAiIHkxPSIyNzMuMTEzIiB4Mj0iMjAwIiB5Mj0iOC4xMTMiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCAyNjUpIj4KCTxzdG9wICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiNBMEM3RDMiLz4KCTxzdG9wICBvZmZzZXQ9IjAuMzE5NSIgc3R5bGU9InN0b3AtY29sb3I6I0MwRDRERSIvPgoJPHN0b3AgIG9mZnNldD0iMC43Njg4IiBzdHlsZT0ic3RvcC1jb2xvcjojRThFNUVDIi8+Cgk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojRjhFREY1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxyZWN0IGlkPSJYTUxJRF82MF8iIGZpbGw9InVybCgjWE1MSURfMl8pIiB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI2NSIvPgo8bGluZWFyR3JhZGllbnQgaWQ9IlNWR0lEXzFfIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwMC4xIiB5MT0iOS45OTc1NTllLTAyIiB4Mj0iMjAwLjEiIHkyPSIxODYiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCAyNjUpIj4KCTxzdG9wICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiNBMEM3RDMiLz4KCTxzdG9wICBvZmZzZXQ9IjAuMzE5NSIgc3R5bGU9InN0b3AtY29sb3I6I0MwRDRERSIvPgoJPHN0b3AgIG9mZnNldD0iMC43Njg4IiBzdHlsZT0ic3RvcC1jb2xvcjojRThFNUVDIi8+Cgk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojRjhFREY1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxwYXRoIGZpbGw9InVybCgjU1ZHSURfMV8pIiBkPSJNMzk1LjMsOTYuMmMtNS0wLjgtNi4xLDEuMS04LjUsMi45Yy0xLTIuMy0yLjYtNi4yLTcuNy01YzEuNS01LjMtMi42LTguNC03LjctOC40CgljLTAuNiwwLTEuMiwwLjEtMS44LDAuMmMtMS44LTQuMS02LTYuOS0xMC43LTYuOWMtNi41LDAtMTEuOCw1LjMtMTEuOCwxMS44YzAsMC40LDAsMC45LDAuMSwxLjNjLTEuMi0wLjgtMi41LTEuMy0zLjktMS4zCgljLTQuMywwLTcuOSw0LjItNy45LDkuNGMwLDEuMiwwLjIsMi40LDAuNiwzLjVjLTAuNS0wLjEtMS0wLjEtMS42LTAuMWMtNi45LDAtMTIuNSw1LjUtMTIuNywxMi40Yy0wLjktMC4yLTEuOS0wLjQtMi45LTAuNAoJYy02LjQsMC0xMS43LDUuMi0xMi41LDExLjhjLTEuMi0wLjQtMi41LTAuNi0zLjktMC42Yy01LjksMC0xMC44LDMuOC0xMi4xLDguOWMtMi40LTItNS41LTMuMi04LjktMy4yYy02LDAtMTEuMSwzLjctMTIuOCw4LjgKCWMtMS41LTEuNC0zLjgtMi4zLTYuMy0yLjNjLTIuMSwwLTQuMSwwLjYtNS41LDEuN2gtMC4xYy0xLjMtNS41LTYuMi05LjUtMTIuMS05LjVjLTIuNCwwLTQuNywwLjctNi42LDEuOWMtMS40LTAuNy0zLTEuMi00LjgtMS4yCgljLTAuMywwLTAuNSwwLTAuOCwwYy0xLjUtNC4xLTUuMi03LTkuNS03Yy0zLjEsMC01LjksMS41LTcuOCwzLjljLTIuMi00LjgtNi44LTguMi0xMi4yLTguMmMtNS42LDAtMTAuNSwzLjctMTIuNSw4LjgKCWMtMi4xLTAuOS00LjQtMS41LTYuOS0xLjVjLTYuOCwwLTEyLjUsMy45LTE0LjUsOS4zYy0wLjIsMC0wLjUsMC0wLjcsMGMtNS4yLDAtOS42LDMuMi0xMS40LDcuOGMtMi43LTIuOC03LTQuNS0xMS44LTQuNQoJYy0zLjMsMC02LjQsMC45LTguOSwyLjNjLTIuMS02LjUtOC0xMi4yLTE4LjEtOS45Yy0yLjctMi4zLTYuMy0zLjctMTAuMS0zLjdjLTIuNSwwLTQuOCwwLjYtNi45LDEuNmMtMi4yLTUuOS03LjktMTAuMS0xNC42LTEwLjEKCWMtOC42LDAtMTUuNiw3LTE1LjYsMTUuNmMwLDAuOSwwLjEsMS43LDAuMiwyLjVjLTIuNi01LTcuOC04LjQtMTMuOC04LjRjLTguMywwLTE1LjEsNi41LTE1LjYsMTQuNmMtMi45LTMuMi03LTUuMy0xMS43LTUuMwoJYy03LjQsMC0xMy41LDUuMS0xNS4yLDEyYy0yLjktMy41LTkuOC02LTE0LjctNnYxMTkuMmg0MDBWMTAyQzQwMCwxMDIsNDAwLDk3LDM5NS4zLDk2LjJ6Ii8+CjxwYXRoIGZpbGw9IiM4RUE4QkIiIGQ9Ik00MDAsMjA2LjJjMCwwLTI1LjMtMTkuMi0zMy42LTI1LjdjLTEzLjQtMTAuNi0yMy4xLTEyLjktMzEuNy03cy0yMy45LDE5LjctMjMuOSwxOS43cy01OC45LTYzLjktNjEuNS02Ni40CgljLTEuNS0xLjQtMy42LTEuNy01LjUtMC45Yy01LjIsMi40LTE3LjYsOS43LTI0LjUsMTIuN2MtNi45LDIuOS00MS01MC43LTQ5LjYtNTNzLTg0LjMsODMuMy0xMDEuNCw3NS4xcy0yNi45LTIuMy0zNS40LDMuNQoJYy04LjYsNS45LTExLDUuOS0xNS45LDguMnMtMTcuMS01LjktMTcuMS01LjlWMjY1YzAsMCw0MDAsMC4yLDQwMCwwdi01OC44SDQwMHoiLz4KPHBhdGggZmlsbD0iIzdFOTZBNiIgZD0iTTMzMy40LDE3OWMtMTMuMS05LjMtNDAsNC42LTU1LjEsMTAuN2MtMjMuNiw5LjYtOTQtNTQuNC0xMDcuMi01OS43YzAsMC00LjIsMy43LTkuNiw3LjYKCWMtMy41LTAuNC04LjQtNS43LTkuOS00LjdjLTQuNiwzLjEtMTcuOCwxNS40LTI4LjMsMjYuNmMtMTAuNSwxMS4zLTExLjcsMC0xNS44LTAuNmMtMi41LTAuNC01NC4xLDQyLjUtNTguNyw0My4xCglDMjIuMywyMDUuMywwLDE5Ny41LDAsMTk3LjVWMjY1bDQwMC0wLjF2LTUzLjNDNDAwLDIxMS42LDM0NC44LDE4Ny4xLDMzMy40LDE3OXoiLz4KPHBhdGggZmlsbD0iIzc4OEY5RSIgZD0iTTAsMjY0Ljl2LTU4LjZjMCwwLDguMiwxLjgsMTEuMyw1LjNjMy4xLDMuNiwyNi4xLTQuMiwyNi4xLDQuN3MwLjUsNC4yLDAuNSwxNC44YzAsMTAuNywyMy00LjIsMzguMS0xOC40CglzMzQuOS00OS4yLDM2LTM1YzEsMTQuMi0xNS4xLDM5LjItMjQsNTYuNEM3OS4xLDI1MS40LDUxLjcsMjY1LDUxLjcsMjY1TDAsMjY0Ljl6Ii8+CjxwYXRoIGZpbGw9IiM3ODhGOUUiIGQ9Ik0xMDAsMjY1YzAsMCw2Ni43LTEyNS4xLDY4LjMtMTE2LjhzLTYuOCwyOS43LDIuMSwyNi4xYzguOS0zLjYsMTQuNi0xNiwxOC44LTkuNXMxNi4yLDM4LjYsMjEuOSwzMy44CgljNS43LTQuNywyMS40LTEzLjEsMjIuNC02LjVjMSw2LjUtMSw1LjMtNS43LDIwLjJDMjIzLjEsMjI3LjEsMjAwLDI2NSwyMDAsMjY1aC0xMGMwLDAsNi0yNC44LDguNi0zNC45YzIuNi0xMC4xLTMuNy0xOS0xMi04LjMKCXMtMjMsMjItMjQsMTcuOHMtNS43LTMwLjMtMTguOC0xNC4yYy0xMywxNi0zMy44LDM5LjctMzMuOCwzOS43aC0xMFYyNjV6Ii8+CjxwYXRoIGZpbGw9IiM3ODhGOUUiIGQ9Ik0yNDUsMjY1YzAsMCwxOS44LTU0LjcsMzMuNC02NC4yczUzLjctMjcuOSw0Ni45LTEzLjZjLTYuOCwxNC4yLTExLDM0LjQtMjAuMyw0OS44CgljLTkuNCwxNS40LTE4LjgsMjYuMS0xNC4xLDEzLjZjNC43LTEyLjUsNi40LTIzLjMsMy43LTIzLjFDMjcxLjMsMjI5LjEsMjYwLDI2NSwyNjAsMjY1SDI0NXoiLz4KPC9zdmc+Cg==" alt="" data-image-width="400"  data-image-height="265">
                    <!-- delete button  -->
                   <span class=" u-file-icon u-icon u-icon-5">  <a class="delete-button" href="{% url 'to_do_list:task_delete' Task.name %}"><img src="{% static 'to_do_list/images/trash.png'%}"  alt=""></a></span>
          </div>
        </div>
      </div> <!-- pokud nebyla zadna task vytvorena  -->
        {% empty %}
          <center>
                  <h5>Let's create some tasks.</h5>
                    <img src="{% static 'to_do_list/images/task.png' %}" alt="Press Add task button and start using Teamos!" style="width:500px;height:500px;" >
          </center>

    {% endfor %}
    </section>


  <script>
      console.log("js called")
           $(".delete-button").on("click", function(e) {
                    console.log("button active")
                    e.preventDefault();
                    var $this =$(this);
                    $.ajax({
                        type: "GET",
                        url: $this.attr("href"),
                        dataType: "json",
                        data :{
                            action : "post"
                    },
                        success:function (json){
                            console.log("task delete")
                            if (json.message === "success"){
                                if (confirm('Do you really want to delete this task?')) {

                                     $this.parents('.record').fadeOut('slow', function(){
                                     $this.parents('.record').remove();
                                });
                                }

                            }
                        },
                        error : function(xhr,errmsg,err) {
                            console.log("json failed ")
                            console.log(xhr.status + ": " + xhr.message);
                        }
                                });
                            });

           $(".done-button").on("click", function(e) {
                    console.log("button active")
                    e.preventDefault();
                    var $this =$(this);
                    $.ajax({
                        type: "GET",
                        url: $this.attr("href"),
                        dataType: "json",
                        data :{
                            action : "post"
                    },
                        success:function (json){
                            console.log("task done")
                            if (json.message === "success"){
                                 $this.parents('.record').fadeOut('slow', function(){
                                     $this.parents('.record').hide();
                                 })
                            }


                        },
                        error : function(xhr,errmsg,err) {
                            console.log("json failed ")
                            console.log(xhr.status + ": " + xhr.message);
                        }
                                });
                            });

           $(".show-done").on("click", function(e) {
                    console.log("button active")
                    e.preventDefault();
                    var $this =$(this);
                    $.ajax({
                        type: "GET",
                        url: $this.attr("href"),
                        dataType: "json",

                        success:function (json){
                            console.log("data recieved from django in jq")
                            var name_list = JSON.parse(json.name)
                            console.log(name_list)
                            if(name_list.length > 0){
                                 $("#panel").slideDown("slow");
                                   $.each(name_list , function (index, value) {
                                       $("#done").after("Task: "+ value+ "<br>" );

                                   });
                            }else{
                                 $("#panel").slideDown("slow");
                                   $("#done").text("No tasks done yet." );
                            }


                        },
                        error : function(xhr,errmsg,err) {
                            console.log("json failed ")
                            console.log(xhr.status + ": " + xhr.message);
                        }
                                });
                            });
            $(".hide-done").on("click", function(e) {
                    console.log("button active")
                    $("#panel").slideUp("slow");

                });
            $(".describe").on("click", function(e) {
                console.log("button active")
                e.preventDefault();
                var $this = $(this);
                var des = $this.attr("value");
                console.log(des);
                window.alert(des);
            });


  </script>


    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-98e9"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">List of your task, which have you created or someone else has assigned them to you.</p>
      </div></footer>


</body></html>
